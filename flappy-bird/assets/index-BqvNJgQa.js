var _t=Object.defineProperty;var Dt=(s,t,e)=>t in s?_t(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>(Dt(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();const q=document.getElementById("debug-overlay");function W(s){q.append(s),q.append(`
`)}function It(){q.innerHTML=""}function u(s,t){if(!s)throw new Error(t??"Assertion failed.")}let x,r;function Ct(){x=document.getElementById("app"),x.oncontextmenu=t=>t.preventDefault();const s=x.getContext("webgl2",{desynchronized:!1,antialias:!0});u(s,"Failed to initialize WebGL 2"),r=s,r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),pt()}function b(){return x.width}function p(){return x.height}function pt(){const s=x.height/x.width,t=Math.min(x.width,window.innerWidth),e=t*s;x.style.width=`${t}px`,x.style.height=`${e}px`}let wt;function gt(s){requestAnimationFrame(gt),pt(),wt(s)}function Lt(s){wt=s,requestAnimationFrame(gt)}function Y(){const s=r.createBuffer();return u(s,"Failed to create WebGL buffer"),s}function Pt(){const s=r.createVertexArray();return u(s,"Failed to create WebGL vertex array"),s}function ot(s,t){const e=r.getUniformLocation(s,t);return u(e,"Failed to get WebGL uniform location"),e}function Ot(s,t){const e=r.createProgram();u(e,"Failed to create WebGL program");const i=at(r.VERTEX_SHADER,s),n=at(r.FRAGMENT_SHADER,t);r.attachShader(e,i),r.attachShader(e,n),r.linkProgram(e);const o=r.getProgramInfoLog(e);return o&&o.length>0&&console.log("Program linkage log: "+o),u(r.getProgramParameter(e,r.LINK_STATUS),"Failed to link program"),r.deleteShader(i),r.deleteShader(n),e}function at(s,t){const e=r.createShader(s);u(e,"Failed to create WebGL shader"),r.shaderSource(e,t),r.compileShader(e);const i=r.getShaderInfoLog(e);return i&&i.length>0&&console.log(`Shader compilation log: ${i}

Shader source: ${t}`),u(r.getShaderParameter(e,r.COMPILE_STATUS),"Failed to compile shader"),e}var j=(s=>(s[s.Left=0]="Left",s))(j||{});class xt{constructor(){a(this,"downFrame",0)}}const _=new Map,D=new Map;function Mt(){for(const s of _)W(`Key down: ${s[0]} (frame ${s[1].downFrame})`);for(const s of D)W(`Mouse button down: ${s[0]} (frame ${s[1].downFrame})`)}function mt(){_.clear(),D.clear()}function Nt(s){let t=_.get(s.code);t||(t=new xt,t.downFrame=C,_.set(s.code,t))}function Yt(s){_.delete(s.code)}function Gt(s){s.pointerType!=="mouse"&&bt(s)}function Xt(s){s.pointerType!=="mouse"&&Tt(s)}function bt(s){let t=D.get(s.button);t||(t=new xt,t.downFrame=C,D.set(s.button,t))}function Tt(s){D.delete(s.button)}function Vt(s){s.preventDefault()}function kt(s){s.preventDefault()}function Qt(){window.addEventListener("keydown",Nt),window.addEventListener("keyup",Yt),window.addEventListener("pointerdown",Gt),window.addEventListener("pointerup",Xt),window.addEventListener("mousedown",bt),window.addEventListener("mouseup",Tt),window.addEventListener("touchstart",Vt,{passive:!1}),window.addEventListener("touchend",kt,{passive:!1})}function F(s){const t=_.get(s);return(t==null?void 0:t.downFrame)===C}function Et(s){const t=D.get(s);return(t==null?void 0:t.downFrame)===C}function Wt(s,t,e){return 4278190080|(e&255)<<16|(t&255)<<8|s&255}function $t(s,t,e,i){return(i&255)<<24|(e&255)<<16|(t&255)<<8|s&255}function zt(s){return s*(Math.PI/180)}class v{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.width=i,this.height=n}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}containsRect(t){return this.containsPoint(t.x,t.y)||this.containsPoint(t.x+t.width,t.y)||this.containsPoint(t.x,t.y+t.height)||this.containsPoint(t.x+t.width,t.y+t.height)}}class Ht{constructor(t,e){this.width=t,this.height=e}}function J(s){return`/flappy-bird/${s}`}const K=[];let y;const ct=new Map;function Rt(){const s=r.createTexture();return u(s,"Failed to create WebGL texture"),s}function Z(s){var e;const t=(e=s.options)!=null&&e.repeat?r.REPEAT:r.CLAMP_TO_EDGE;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)}function qt(){y={handle:Rt(),width:1,height:1,options:null},r.bindTexture(r.TEXTURE_2D,y.handle),Z(y),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,255,255,255])),r.bindTexture(r.TEXTURE_2D,null)}function P(s,t){let e=ct.get(s);return e||(e={handle:Rt(),width:1,height:1,options:t??null},ct.set(s,e),r.bindTexture(r.TEXTURE_2D,e.handle),Z(e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([255,255,255,255])),r.bindTexture(r.TEXTURE_2D,null),Kt(e,s),e)}function Kt(s,t){const e=new Image;e.onload=()=>{K.push({texture:s,image:e})},e.src=J(t)}function jt(){for(const s of K){const t=s.image;s.texture.width=t.width,s.texture.height=t.height,r.bindTexture(r.TEXTURE_2D,s.texture.handle),Z(s.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width,t.height,0,r.RGBA,r.UNSIGNED_BYTE,t)}r.bindTexture(r.TEXTURE_2D,null),K.length=0}const Jt=`#version 300 es\r
\r
layout(location = 0) in vec2 position;\r
layout(location = 1) in vec4 inColor;\r
layout(location = 2) in vec2 inTexCoord;\r
uniform vec2 viewportSize;\r
\r
out vec4 color;\r
out vec2 texCoord;\r
\r
void main() {\r
    gl_Position = vec4(\r
        // TODO: floor(position) is to fix bad looking pixel art when using NEAREST filtering\r
        // Need to use better pixel art shader for this instead of floor hack.\r
        floor(position.x) / (viewportSize.x / 2.0) - 1.0,\r
        floor(position.y) / (viewportSize.y / 2.0) - 1.0,\r
        1.0,\r
        1.0\r
    );\r
    color = inColor;\r
    texCoord = inTexCoord;\r
}\r
`,Zt=`#version 300 es\r
precision highp float;\r
\r
in vec4 color;\r
in vec2 texCoord;\r
uniform sampler2D currentTexture;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    outColor = texture(currentTexture, texCoord) * color;\r
}\r
`,z=4,te=6,G=1024;let B=null,yt,vt;function ee(){return B||(B=Ot(Jt,Zt),yt=ot(B,"viewportSize"),vt=ot(B,"currentTexture"),B)}var I=(s=>(s[s.BottomLeft=0]="BottomLeft",s[s.Center=1]="Center",s))(I||{});class At{constructor(){a(this,"vao");a(this,"positionBuffer");a(this,"colorBuffer");a(this,"texCoordBuffer");a(this,"indexBuffer");a(this,"positions",new Float32Array(z*2*G));a(this,"colors",new Uint32Array(z*G));a(this,"texCoords",new Float32Array(z*2*G));a(this,"indices",new Uint16Array(te*G));a(this,"numVertices",0);a(this,"numIndices",0);a(this,"started",!1);a(this,"currentTexture",y);this.vao=Pt(),this.positionBuffer=Y(),this.colorBuffer=Y(),this.texCoordBuffer=Y(),this.indexBuffer=Y(),r.bindVertexArray(this.vao),r.bindBuffer(r.ARRAY_BUFFER,this.positionBuffer),r.bufferData(r.ARRAY_BUFFER,this.positions.length,r.DYNAMIC_DRAW),r.enableVertexAttribArray(0),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.colorBuffer),r.bufferData(r.ARRAY_BUFFER,this.colors.length,r.DYNAMIC_DRAW),r.enableVertexAttribArray(1),r.vertexAttribPointer(1,4,r.UNSIGNED_BYTE,!0,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.texCoordBuffer),r.bufferData(r.ARRAY_BUFFER,this.texCoords.length,r.DYNAMIC_DRAW),r.enableVertexAttribArray(2),r.vertexAttribPointer(2,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,this.indices.length,r.DYNAMIC_DRAW),r.bindVertexArray(null)}begin(){u(!this.started),this.started=!0}vertex(t,e,i,n,o){let c=this.numVertices*2;this.positions[c]=t,this.positions[c+1]=e,this.colors[this.numVertices]=o,this.texCoords[c]=i,this.texCoords[c+1]=n,++this.numVertices}quadIndices(){this.indices[this.numIndices++]=this.numVertices+0,this.indices[this.numIndices++]=this.numVertices+1,this.indices[this.numIndices++]=this.numVertices+2,this.indices[this.numIndices++]=this.numVertices+1,this.indices[this.numIndices++]=this.numVertices+2,this.indices[this.numIndices++]=this.numVertices+3}quadCorners(t,e,i,n,o){this.quadIndices(),this.vertex(t,e,0,0,o),this.vertex(t,n,0,1,o),this.vertex(i,e,1,0,o),this.vertex(i,n,1,1,o)}colorQuadCorners(t,e,i,n,o=4294967295){u(this.started),this.switchTexture(y),this.quadCorners(t,e,i,n,o)}colorQuad(t,e,i,n,o=4294967295){this.colorQuadCorners(t,e,t+i,e+n,o)}colorRect(t,e=4294967295){this.colorQuad(t.x,t.y,t.width,t.height,e)}textureQuadCorners(t,e,i,n,o,c=4294967295){u(this.started),this.switchTexture(o),this.quadCorners(t,e,i,n,c)}textureQuad(t,e,i,n,o,c=4294967295){this.textureQuadCorners(t,e,t+i,e+n,o,c)}textureQuadRotated(t,e,i,n,o,c,E,w,m=4294967295){u(this.started),this.switchTexture(o);const d=Math.cos(c),R=Math.sin(c),h=i,g=n;E*=i,w*=n;const l=[0,0,0,0,0,g,0,1,h,0,1,0,h,g,1,1];this.quadIndices();for(let f=0;f<l.length;f+=4){const T=l[f+0]-E,A=l[f+1]-w;this.vertex(t+(d*T-R*A),e+(R*T+d*A),l[f+2],l[f+3],m)}}textureQuadTexCoord(t,e,i,n,o,c=4294967295){this.textureQuadCorners(t,e,t+i,e+n,o,c)}textureQuadRepeating(t,e,i,n,o,c,E,w,m,d=4294967295){u(this.started),this.switchTexture(m),this.quadIndices();const R=t+i,h=e+n,g=E/o,l=w/c,f=g+i/o,T=l+n/c;this.vertex(t,e,g,l,d),this.vertex(t,h,g,T,d),this.vertex(R,e,f,l,d),this.vertex(R,h,f,T,d)}measureText(t,e){let i=0;for(let n=0;n<e.length;++n){const o=e.charCodeAt(n),c=t.chars.get(o);c&&(i+=c.advanceX)}return new Ht(i,t.base)}drawTextRect(t,e,i,n=4294967295,o=0){if(u(this.started),i.length===0)return;this.switchTexture(e.texture);const c=1/e.texture.width,E=1/e.texture.height;let w,m;switch(o){case 0:w=t.x,m=t.y;break;case 1:const d=this.measureText(e,i);w=t.x+t.width/2-d.width/2,m=t.y+t.height/2-d.height/2;break;default:u(!1)}w=Math.floor(w),m=Math.floor(m);for(let d=0;d<i.length;++d){const R=i.charCodeAt(d),h=e.chars.get(R);if(!h)continue;const g=w+h.offsetX,l=m-h.offsetY+e.base-h.height,f=g+h.width,T=l+h.height,A=h.x*c,$=(e.texture.height-h.y-h.height)*E,it=A+h.width*c,nt=$+h.height*E;this.quadIndices(),this.vertex(g,l,A,$,n),this.vertex(g,T,A,nt,n),this.vertex(f,l,it,$,n),this.vertex(f,T,it,nt,n),w+=h.advanceX}}drawText(t,e,i,n,o=4294967295){this.drawTextRect(new v(t,e,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),i,n,o)}switchTexture(t){this.currentTexture!==t&&(this.commit(!0),this.currentTexture=t)}commit(t){u(this.started),this.numVertices>0&&(r.bindBuffer(r.ARRAY_BUFFER,this.positionBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.positions,0,this.numVertices*2),r.bindBuffer(r.ARRAY_BUFFER,this.colorBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.colors,0,this.numVertices),r.bindBuffer(r.ARRAY_BUFFER,this.texCoordBuffer),r.bufferSubData(r.ARRAY_BUFFER,0,this.texCoords,0,this.numVertices*2),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,this.indices,0,this.numIndices),r.useProgram(ee()),r.uniform2f(yt,b(),p()),r.uniform1i(vt,0),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.currentTexture.handle),r.bindVertexArray(this.vao),r.drawElements(r.TRIANGLES,this.numIndices,r.UNSIGNED_SHORT,0),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null)),this.numVertices=0,this.numIndices=0,this.started=!1,t&&this.begin()}end(){this.commit(!1),this.currentTexture=y}}function X(){return Math.random()*2**32>>>0}class tt{constructor(t,e,i,n){this.a=t,this.b=e,this.c=i,this.d=n,u((t|e|i|n)!==0,"At least one value must be non-zero")}static newRandom(){let t=0,e=0,i=0,n=0;for(;!(t|e|i|n);)t=X(),e=X(),i=X(),n=X();return new tt(t,e,i,n)}nextFloat(){let t=this.b<<9,e=this.b*5;return e=(e<<7|e>>>25)*9,this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=t,this.d=this.d<<11|this.d>>>21,(e>>>0)/4294967296}nextFloatBetween(t,e){return t+this.nextFloat()*(e-t)}}function H(s,t){const e=document.createElement("audio");return e.src=J(s),t&&typeof t.volume=="number"&&(e.volume=t.volume),e}const re=new TextDecoder("utf-8");class se{constructor(t){a(this,"view");a(this,"offset",0);this.view=new DataView(t)}get done(){return this.offset>=this.view.byteLength}readInt16(){const t=this.view.getInt16(this.offset,!0);return this.offset+=2,t}readUint8(){const t=this.view.getUint8(this.offset);return this.offset+=1,t}readUint16(){const t=this.view.getUint16(this.offset,!0);return this.offset+=2,t}readUint32(){const t=this.view.getUint32(this.offset,!0);return this.offset+=4,t}readCString(){let t=this.offset;for(;!this.done;)if(this.readUint8()===0)return re.decode(this.view.buffer.slice(t,this.offset));throw new Error("missing null terminator")}}class ut{constructor(t){a(this,"texture",y);a(this,"lineHeight",0);a(this,"base",0);a(this,"chars",new Map);fetch(J(t)).then(e=>(u(e.ok),e.arrayBuffer())).then(this.load.bind(this))}load(t){const e=new se(t);for(u(e.readUint32()===54938946);!e.done;){const i=e.readUint8(),n=e.readUint32(),o=e.offset+n;switch(i){case 2:this.lineHeight=e.readUint16(),this.base=e.readUint16();break;case 3:this.texture=P(e.readCString());break;case 4:for(;e.offset<o;){const c=e.readUint32();this.chars.set(c,{x:e.readUint16(),y:e.readUint16(),width:e.readUint16(),height:e.readUint16(),offsetX:e.readInt16(),offsetY:e.readInt16(),advanceX:e.readInt16()}),e.offset+=2}break}e.offset=o}}}let S,Bt,St,V,Ft,k,Q,O,et;function ie(){S=P("player.png"),Bt=P("obstacle.png"),St=P("background.png",{repeat:!0}),V=P("ground.png",{repeat:!0}),Ft=H("score.wav"),k=H("player-hit-obstacle.ogg"),O=new ut("font.fnt"),et=new ut("font-big.fnt"),Q=H("jump.wav",{volume:.55})}class ne{draw(t,e,i){const n=new v(100,100,b()-200,p()-200);t.colorRect(n),t.drawTextRect(n,O,`Final score: ${e}`,4294967295,I.Center),n.y-=O.lineHeight*2,t.drawTextRect(n,O,`Best score: ${i}`,4294967295,I.Center)}}const rt=150,oe=-900,L=25;class ae{constructor(){a(this,"y",0);a(this,"vy",0);a(this,"dead",!1);this.reset()}get x(){return rt}reset(){this.y=(p()-L)/2,this.vy=0,this.dead=!1}calcRect(){return new v(this.x,this.y,L,L)}update(t,e){this.vy+=oe*t,e&&(this.vy=400,Q.pause(),Q.currentTime=0,Q.play());let i=0;return this.y+=this.vy*t,this.y+L>=p()?(this.y=p()-L,this.vy=0):this.y<=M&&(this.y=M,this.vy=0,i=1),i}draw(t){let e=(this.vy===0?0:30)*Math.sign(this.vy);this.dead&&(e=-90),t.textureQuadRotated(this.x+S.width-4,this.y+S.height,S.width*2,S.height*2,S,zt(e),.5,.5)}}const ht=180,ce=-100,ue=100,Ut=-180;var U=(s=>(s[s.No=0]="No",s[s.Yes=1]="Yes",s))(U||{});class dt{constructor(t,e){a(this,"x",0);a(this,"gapOffsetY",0);a(this,"scored",!1);this.x=t,this.reset(e)}get centerX(){return this.x+this.width/2}get width(){return 70}containsRect(t){for(const e of this.calcRects())if(e.containsRect(t))return!0;return!1}calcRects(){const e=p()/2+this.gapOffsetY-ht/2,i=e+ht;return[new v(this.x,M,this.width,e-M),new v(this.x,i,this.width,p()-i)]}reset(t){this.gapOffsetY=t.nextFloatBetween(ce,ue),this.scored=!1}update(t){return this.x+=Ut*t,!this.scored&&this.centerX<=rt?(this.scored=!0,1):0}draw(t){for(const e of this.calcRects())t.textureQuad(e.x,e.y,e.width,e.height,Bt)}}const lt=200,he=300;class de{constructor(t){a(this,"obstacles",[]);this.random=t,this.reset()}reset(){this.obstacles.length=0,this.obstacles.push(new dt(rt+he,this.random))}getNearestObstacle(t){let e=this.obstacles[0],i=1/0;for(const n of this.obstacles){const o=Math.abs(t-n.centerX);o<i&&(e=n,i=o)}return e}getFarthestObstacle(){let t=this.obstacles[0];for(let e=1;e<this.obstacles.length;++e){const i=this.obstacles[e];i.x>=t.x&&(t=i)}return t}reuseObstacle(t){t.x=this.getFarthestObstacle().x+lt,t.reset(this.random)}spawnObstacles(){let t=this.getFarthestObstacle();for(;t.x<=b();)t=new dt(t.x+lt,this.random),this.obstacles.push(t)}update(t){let e=U.No;for(const i of this.obstacles)i.update(t)===U.Yes&&(u(e===U.No),e=U.Yes),i.x+i.width<0&&this.reuseObstacle(i);return e}draw(t){for(const e of this.obstacles)e.draw(t)}}const M=120;class le{constructor(){a(this,"score",0);a(this,"bestScore",0);a(this,"backgroundX",0);a(this,"spriteBatch",new At);a(this,"player",new ae);a(this,"obstacleManager",new de(new tt(100,200,300,400)));a(this,"gameOver",new ne);a(this,"state",0);ie(),this.loadBestScore(),this.reset()}saveBestScore(){localStorage.setItem("flappyBirdBestScore",this.bestScore.toString())}loadBestScore(){const t=localStorage.getItem("flappyBirdBestScore");this.bestScore=t&&t.length>0?Number.parseInt(t):0}reset(){this.player.reset(),this.obstacleManager.reset(),this.score=0,this.backgroundX=0,this.state=0,k.pause(),k.currentTime=0}updateWaitForStart(t){this.state===0&&t&&(this.state=1)}updateGameplay(t,e){if(this.state!==1)return;const i=this.player.update(t,e);this.backgroundX-=Ut*t,this.obstacleManager.update(t)===U.Yes&&(this.score+=1,Ft.play());const n=this.obstacleManager.getNearestObstacle(this.player.x);(i||n.containsRect(this.player.calcRect()))&&(this.bestScore=Math.max(this.bestScore,this.score),this.saveBestScore(),this.player.vy=0,this.player.dead=!0,k.play(),this.state=2)}updateGameOverScreen(t){return this.state!==3?t:t&&(this.reset(),!1)}updateGameOverAnimation(t){if(this.state!==2)return;this.player.update(t,!1)&&(this.state=3)}update(t){this.obstacleManager.spawnObstacles();let e=F("Space")||F("Enter")||F("W")||F("ArrowUp")||Et(j.Left);this.updateGameOverAnimation(t),e=this.updateGameOverScreen(e),this.updateWaitForStart(e),this.updateGameplay(t,e)}drawGameOverScreen(){this.state===3&&this.gameOver.draw(this.spriteBatch,this.score,this.bestScore)}draw(){this.spriteBatch.begin(),this.spriteBatch.textureQuadRepeating(0,0,b(),p(),64,64,this.backgroundX,0,St),this.spriteBatch.textureQuadRepeating(0,0,b(),M,V.width,V.height,this.backgroundX+10,0,V),this.obstacleManager.draw(this.spriteBatch),this.player.draw(this.spriteBatch),this.drawGameOverScreen(),this.spriteBatch.drawTextRect(new v(0,p()-200,b(),200),et,this.score.toString(),Wt(255,255,255),I.Center),this.spriteBatch.end()}}class fe{constructor(){a(this,"spriteBatch",new At);a(this,"paused",!1)}update(t){!this.paused&&F("Escape")&&(this.paused=!0),this.paused&&(F("Enter")||Et(j.Left))&&(mt(),this.paused=!1)}draw(){if(!this.paused)return;this.spriteBatch.begin(),this.spriteBatch.colorQuad(0,0,b(),p(),$t(0,0,0,160));const t=new v(0,0,b(),p());t.y+=35,this.spriteBatch.drawTextRect(t,et,"Paused",4294967295,I.Center),t.y-=70,this.spriteBatch.drawTextRect(t,O,"Press any key to continue",4294967295,I.Center),this.spriteBatch.end()}}let C=0,st,N,ft=performance.now()/1e3;function pe(s){let t=s-ft;t>1/20&&(t=1/20),ft=s,W(`FPS: ${(1/t).toFixed(0)}`),Mt(),jt(),N.update(t),N.paused||st.update(t)}function we(s){It(),W(`Frame: ${C}`),pe(s/1e3),r.viewport(0,0,b(),p()),r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT),st.draw(),N.draw(),++C}function ge(){N.paused=!0,mt()}function xe(){Ct(),Qt(),qt(),st=new le,N=new fe,window.addEventListener("blur",ge),Lt(we)}document.addEventListener("DOMContentLoaded",xe);
